<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The World's Easiest Game</title>
    <style>
        #player {
            width: 30px;
            height: 30px;
            background-color: blue;
            position: absolute;
            left: 0;
            top: 50px;
        }

        #redSquare {
            width: 30px;
            height: 40px;
            background-color: red;
            position: absolute;
            left: 300px;
            top: 200px;
        }

        #wall {
            width: 20px; /* Width of the wall */
            height: 150px; /* Height of the wall */
            background-color: black;
            position: absolute;
            left: 150px; /* Position of the wall */
            top: 50px; /* Position of the wall */
        }
    </style>
</head>
<body>

    <div id="player"></div>
    <div id="redSquare"></div>
    <div id="wall"></div>

    <script>
        let player = document.getElementById("player");
        let redSquare = document.getElementById("redSquare");
        let wall = document.getElementById("wall");

        let positionX = 0;
        let positionY = 50;
        let speed = 3;
        const keysPressed = {};

        // Initial player start positions
        const startX = 0;
        const startY = 50;

        // Detect key presses
        document.addEventListener('keydown', function(event) {
            keysPressed[event.key.toLowerCase()] = true;
        });

        document.addEventListener('keyup', function(event) {
            keysPressed[event.key.toLowerCase()] = false;
        });

        // Check collision between player and red square
        function isColliding(player, target) {
            const playerRect = player.getBoundingClientRect();
            const targetRect = target.getBoundingClientRect();

            return !(
                playerRect.top > targetRect.bottom ||
                playerRect.bottom < targetRect.top ||
                playerRect.left > targetRect.right ||
                playerRect.right < targetRect.left
            );
        }

        // Move the player square and check for collisions
        function movePlayer() {
            let moveX = 0;
            let moveY = 0;

            if (keysPressed['d']) {
                moveX += speed; // Move right
            }
            if (keysPressed['a']) {
                moveX -= speed; // Move left
            }
            if (keysPressed['w']) {
                moveY -= speed; // Move up
            }
            if (keysPressed['s']) {
                moveY += speed; // Move down
            }

            // Normalize diagonal movement
            if (moveX !== 0 && moveY !== 0) {
                const diagonalSpeed = Math.sqrt(moveX * moveX + moveY * moveY);
                moveX = (moveX / diagonalSpeed) * speed;
                moveY = (moveY / diagonalSpeed) * speed;
            }

            // Check collision with the wall
            let newPosX = positionX + moveX;
            let newPosY = positionY + moveY;

            // Temporarily set the player position to check collision
            player.style.left = newPosX + 'px';
            player.style.top = newPosY + 'px';

            // If there's no collision with the wall, update the position
            if (!isColliding(player, wall)) {
                positionX = newPosX;
                positionY = newPosY;
            }

            // Reset the player position if colliding with the red square
            if (isColliding(player, redSquare)) {
                positionX = startX;
                positionY = startY;
                player.style.left = positionX + 'px';
                player.style.top = positionY + 'px';
            }

            // Update player position on screen
            player.style.left = positionX + 'px';
            player.style.top = positionY + 'px';

            requestAnimationFrame(movePlayer); // Continuously update movement
        }

        movePlayer(); // Start the movement loop
    </script>

</body>
</html>
