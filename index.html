<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The World's Easiest Game</title>
    <style>
        #player {
            width: 30px;
            height: 30px;
            background-color: blue;
            position: absolute;
            left: 0;
            top: 50px;
        }
    </style>
</head>
<body>

    <div id="player"></div>

    <script>
        let player = document.getElementById("player");

        let positionX = 0;
        let positionY = 50;
        let speed = 3;
        const keysPressed = {};

        // Initial player start positions
        const startX = 0;
        const startY = 50;

        // Detect key presses
        document.addEventListener('keydown', function(event) {
            keysPressed[event.key.toLowerCase()] = true;
        });

        document.addEventListener('keyup', function(event) {
            keysPressed[event.key.toLowerCase()] = false;
        });

        // Check collision between player and target square
        function isColliding(player, target) {
            const playerRect = player.getBoundingClientRect();
            const targetRect = target.getBoundingClientRect();

            return !(
                playerRect.top > targetRect.bottom ||
                playerRect.bottom < targetRect.top ||
                playerRect.left > targetRect.right ||
                playerRect.right < targetRect.left
            );
        }

        // Function to create and add a square
        function addSquare(color, width, height, left, top, type) {
            const square = document.createElement("div");
            square.style.width = width + "px";
            square.style.height = height + "px";
            square.style.backgroundColor = color;
            square.style.position = "absolute";
            square.style.left = left + "px";
            square.style.top = top + "px";

            // Add class to identify red or black square
            square.classList.add(type);
            document.body.appendChild(square);
            return square;
        }

        // Create squares using the function
        const redSquare = addSquare("red", 30, 40, 300, 200, "redSquare");
        const wall = addSquare("black", 20, 150, 150, 50, "wall");

        // Move the player square and check for collisions
        function movePlayer() {
            let moveX = 0;
            let moveY = 0;

            if (keysPressed['d']) {
                moveX += speed; // Move right
            }
            if (keysPressed['a']) {
                moveX -= speed; // Move left
            }
            if (keysPressed['w']) {
                moveY -= speed; // Move up
            }
            if (keysPressed['s']) {
                moveY += speed; // Move down
            }

            // Normalize diagonal movement
            if (moveX !== 0 && moveY !== 0) {
                const diagonalSpeed = Math.sqrt(moveX * moveX + moveY * moveY);
                moveX = (moveX / diagonalSpeed) * speed;
                moveY = (moveY / diagonalSpeed) * speed;
            }

            // Check collision with the wall
            let newPosX = positionX + moveX;
            let newPosY = positionY + moveY;

            // Temporarily set the player position to check collision
            player.style.left = newPosX + 'px';
            player.style.top = newPosY + 'px';

            // If there's no collision with the wall, update the position
            if (!isColliding(player, wall)) {
                positionX = newPosX;
                positionY = newPosY;
            }

            // Reset the player position if colliding with the red square
            if (isColliding(player, redSquare)) {
                positionX = startX;
                positionY = startY;
                player.style.left = positionX + 'px';
                player.style.top = positionY + 'px';
            }

            // Update player position on screen
            player.style.left = positionX + 'px';
            player.style.top = positionY + 'px';

            requestAnimationFrame(movePlayer); // Continuously update movement
        }

        movePlayer(); // Start the movement loop
    </script>

</body>
</html>
